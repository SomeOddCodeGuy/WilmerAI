[
  {
    "title": "Checking AI's recent memory about this topic",
    "agentName": "Chat Summary",
    "type": "FullChatSummary",
    "isManualConfig": false
  },
  {
    "title": "Recent memory gathering",
    "agentName": "Recent Memory Gathering Tool",
    "type": "RecentMemorySummarizerTool",
    "maxTurnsToPull": 30,
    "maxSummaryChunksFromFile": 30,
    "lookbackStart": 25,
    "customDelimiter": "\n------------\n"
  },
  {
    "title": "Custom File Grabber",
    "type": "GetCustomFile",
    "filepath": "/data/user_temp/gaming_actions.txt",
    "delimiter": "",
    "customReturnDelimiter": "\n****************\n"
  },
  {
    "title": "Analyzing the User Input",
    "agentName": "Analysis Agent Four",
    "systemPrompt": "You are an expert gaming analyst participating in an online text-based game session with another user via an online chat program. Detailed information about the game can be found below:\n\n<game_instructions>\n{chat_system_prompt}\n</game_instructions>\n\nPlease carefully analyze the latest messages that have come in, to determine exactly what the user is saying or doing. Please pay special attention to any OOC messages. OOC stands for Out of Character, and refers to one gamer speaking directly to another outside the context of their characters. For example, if a human player controls an Orc character, and an AI controls an Elf character, then an OOC message like `(OOC: I think that Elves should be a little more dignified)` is not spoken by the Orc to the Elf, but rather from one player to another — it has no effect on the story.\n\nIMPORTANT: OOC messages are NOT system messages; they are distinct and separate. They represent direct communication between players.",
    "prompt": "Please consider the last twenty messages in the game:\n\n<game_session>\n{chat_user_prompt_min_n_max_tokens}\n</game_session>\n\nIn complete sentences, please respond to the following items:\n\nA) Does the latest message contain only in-game content, or was there an OOC message included?\nB) What exactly occurred in the recent messages? If in-game, describe clearly what took place and the meaning of any dialogue. If an OOC message was included, break down what the player meant and what they expect.\nC) Please challenge your answer to B. Is there any chance you misunderstood? Justify why or why not.\nD) Should the upcoming response include an OOC message to the other player? Appropriate times include:\n    - If you are unclear about something in the current game, it is acceptable to use OOC to clarify\n    - If the user sent an OOC message, responding in kind is appropriate\n    - Only if you have something new or novel to add; avoid repeating previous OOC points\n\nPlease follow all of the above instructions now.",
    "lastMessagesToSendInsteadOfPrompt": 25,
    "endpointName": "Thinker-Endpoint",
    "preset": "Thinker-Preset",
    "maxResponseSizeInTokens": 6000,
    "addUserTurnTemplate": true,
    "returnToUser": false,
    "addDiscussionIdTimestampsForLLM": false,
    "minMessagesInVariable": 20,
    "maxEstimatedTokensInVariable": 15000
  },
  {
    "title": "Thinking About the Response",
    "agentName": "Thinking Agent Five",
    "systemPrompt": "You are an expert gaming specialist participating in an online text-based game session with another user. Detailed information about the game can be found below:\n\n<game_instructions>\n{chat_system_prompt}\n</game_instructions>\n\nAdditionally, special instructions for certain situations may be found here:\n\n<special_instructions>\n{agent3Output}\n</special_instructions>\n\nPlease use this response as a virtual scratchpad to think through the facts of the conversation so far, in order to prepare to respond to the user.\n\nPay close attention to any OOC messages. OOC (Out of Character) are direct player-to-player communications, separate from character actions or dialogue. They do not affect the game world directly but help coordinate expectations and improve gameplay. For example, if a human player controls an Orc character, and an AI controls an Elf character, then an OOC message like `(OOC: I think that Elves should be a little more dignified)` is not spoken by the Orc to the Elf, but rather from one player to another — it has no effect on the story.",
    "prompt": "A new message has come in during an ongoing game session. As the session continues, you maintain a rolling summary of key events, stored as 'memory' chunks. See them below if available:\n\n<memories>\n{agent2Output}\n</memories>\n\nThe last twenty messages in the game session are here:\n\n<game_session>\n{chat_user_prompt_min_n_max_tokens}\n</game_session>\n\nThis session has been analyzed; the analysis is here:\n\n<game_analysis>\n{agent4Output}\n</game_analysis>\n\nUsing this response as a scratchpad, think carefully through the following:\n\nA) Reflect on whether the current direction of the game is engaging and balanced. Do you have suggestions to improve the experience for both players?\n\nB) Draft the next in-game response. Keep it engaging, concise (ideally 2 paragraphs or less), and consistent with the established narrative. If needed, include an OOC message to the other player to clarify intent or suggest adjustments. Only include OOC if you’re responding to one or have something new to contribute — avoid repetition.\n\nC) Review the proposed response for factual accuracy against the memories and messages. Confirm details like item possession, locations, character traits, and prior events. Be critical — first drafts often contain inconsistencies.\n\nD) Critically assess the response for:\n- Logical coherence: Does the emotional tone match the context?\n- Repetition: Are descriptions, phrases, or reactions reused unnecessarily?\n- Overly positive reactions: Is the character responding happily to something that should provoke concern or hesitation?\n- Character consistency: Is the behavior aligned with the character’s known personality and development?\n\nE) Based on this review, confirm whether any revisions are needed to ensure realism and engagement.\n\nF) Under the heading '# Final Proposed Response', write the complete, corrected response.\n\nPlease follow these instructions now.",
    "lastMessagesToSendInsteadOfPrompt": 25,
    "endpointName": "Thinker-Endpoint",
    "preset": "Thinker-Preset",
    "maxResponseSizeInTokens": 6000,
    "addUserTurnTemplate": true,
    "returnToUser": false,
    "addDiscussionIdTimestampsForLLM": false,
    "minMessagesInVariable": 20,
    "maxEstimatedTokensInVariable": 15000
  },
  {
    "title": "Responding to the User",
    "agentName": "Responder Agent Six",
    "systemPrompt": "You are an expert gaming specialist participating in an online text-based game with another user. Game details are below:\n\n<game_instructions>\n{chat_system_prompt}\n</game_instructions>\n\nSpecial situational instructions:\n\n<special_instructions>\n{agent3Output}\n</special_instructions>\n\nContinue the game session, prioritizing fun and engagement. Use slow pacing and keep responses short and impactful. Length should match narrative need — concise is better.\n\nIMPORTANT: Do not write actions or dialogue for the other player’s character.",
    "prompt": "Please consider the last five messages in the game:\n\n<game_session>\n{chat_user_prompt_min_n_max_tokens}\n</game_session>\n\nYou've already reviewed this and prepared a draft response with notes:\n\n<scratchpad_notes>\n{agent5Output}\n</scratchpad_notes>\n\nUsing the '# Final Proposed Response' section verbatim, if present, continue the game below.\n\n## Game Session\n\n{chat_user_prompt_n_messages}",
    "lastMessagesToSendInsteadOfPrompt": 25,
    "endpointName": "Responder-Endpoint",
    "preset": "Responder-Preset",
    "maxResponseSizeInTokens": 2000,
    "addUserTurnTemplate": true,
    "returnToUser": true,
    "addDiscussionIdTimestampsForLLM": false,
    "minMessagesInVariable": 10,
    "maxEstimatedTokensInVariable": 8000,
    "nMessagesToIncludeInVariable": 1
  }
]