## The `SaveCustomFile` Node

### Overview

The **`SaveCustomFile`** node is a utility node that writes string content to a local text file. This allows you to save
data generated during a workflow—such as an LLM's detailed analysis, a summary of a conversation, or a structured
report—directly to the file system.

The node resolves any workflow variables (e.g., `{agent1Output}`) in the provided content before saving. It returns a
status message indicating the result of the operation, which can be used by subsequent nodes.

### Configuration

Here is the complete JSON structure for a `SaveCustomFile` node.

```json
{
  "title": "A descriptive name for this node (Optional)",
  "type": "SaveCustomFile",
  "filepath": "C:\\Path\\To\\Your\\File.txt",
  "content": "The content to save. This can include variables like {agent1Output} or {lastUserMessage}."
}
```

-----

### Fields

Each field is explained in detail below.

* #### **`title`**

    * **Type**: `String`
    * **Required**: No
    * **Description**: An optional, human-readable name for the node. It's used for logging and makes the workflow
      easier to understand.

* #### **`type`**

    * **Type**: `String`
    * **Required**: Yes
    * **Description**: This **must** be the exact string `"SaveCustomFile"` to identify the node's function.

* #### **`filepath`**

    * **Type**: `String`
    * **Required**: Yes
    * **Description**: The full, absolute or relative path where the file will be saved. If the parent directories do
      not exist, the node will attempt to create them.

* #### **`content`**

    * **Type**: `String`
    * **Required**: Yes
    * **Description**: The string content to be written to the file. This field is processed by the
      `$WorkflowVariableManager$`, so you can embed variables from previous nodes (e.g., `{agent1Output}`,
      `{agent2Input}`) or the conversation history (e.g., `{lastUserMessage}`).

-----

### Example

Let's say a previous "Standard" node (the first node in the workflow) generated a character summary and stored it in
`{agent1Output}`. This `SaveCustomFile` node will then save that summary to a file.

#### Workflow Nodes:

```json
[
  {
    "type": "Standard",
    "prompt": "The user wants a character named Jax, a cybernetically enhanced space pirate. Write a short, compelling bio for him."
  },
  {
    "title": "Save Character Bio to File",
    "type": "SaveCustomFile",
    "filepath": "D:\\WilmerAI\\Characters\\jax_the_pirate.txt",
    "content": "CHARACTER PROFILE\n-----------------\nName: Jax\nBio: {agent1Output}"
  }
]
```

#### Resulting Action:

A file named `jax_the_pirate.txt` is created at the specified path. The `{agent1Output}` placeholder is replaced with
the text generated by the first node, and the combined string is written to the file.

#### Resulting Output:

If this `SaveCustomFile` node is the second node in the workflow, the following string will be available in the
`{agent2Output}` variable for the next node:

```text
File successfully saved to D:\WilmerAI\Characters\jax_the_pirate.txt
```

-----

### Behavior and Edge Cases

It's crucial to understand how the node behaves in specific situations:

* **Output Variable**: The node returns a status message as a single string (e.g., `"File successfully saved to ..."`).
  This output is assigned to a variable based on the node's position (e.g., `{agent1Output}`, `{agent2Output}`).
* **File System Errors**: If the file cannot be written due to permissions issues or other I/O errors, the node will
  return an error message string, for example:
  `"Error saving file: [Errno 13] Permission denied: 'C:\Windows\system.log'"`.
* **Missing `filepath`**: If the `filepath` field is missing from the configuration, the node will return the string:
  `"No filepath specified"`.
* **Missing `content`**: If the `content` field is missing from the configuration, the node will return the string:
  `"No content specified"`. Note that an empty string (`"content": ""`) is valid and will result in an empty file being
  created.